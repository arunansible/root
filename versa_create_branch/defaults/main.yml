---

method: POST
username: ""
password: ""

branchName: "Branch50"
branchCity: "Berlin"
branchState: "Berlin"
branchCountry: "Germany"
address: "Berlin, Germany"
latitude: "52.52"
longitude: "13.40"
zip: "5555"
lanIp: "172.51.120.5/24"
serialNumber: "99991"
serviceBandwidth: "50Mbps"
wanIpForInternet: "172.51.48.18/24"
Organization: "Customer1"
wanIpForMpls: "172.51.64.19/24"
stagingTemplateName: "SDWAN-Staging"
postStagingTemplateName: "SDWAN-PostStaging"
towardsInternetHopAddress: "172.51.48.101"
towardsMplsHopAddress: "172.51.64.100"

local_params:
  address1: "{{ address }}"
  state: "{{ branchState }}"
  country: "{{ branchCountry }}"
  zip: "{{ zip }}"
  longitude: "{{ longitude }}"
  latitude: "{{ latitude }}"
  city: "{{ branchCity }}"

sdwan_device_workflow:
  versanms.sdwan-device-workflow:
     deviceName: "{{ branchName }}"
     siteId: "{{ max_site_id }}"
     orgName: "{{ Organization }}"
     serialNumber: "{{ serialNumber }}"
     deviceGroup: "DeviceGroup1"
     locationInfo: "{{ local_params }}"
     postStagingTemplateInfo:
      templateName: "SDWAN-PostStaging"
      templateData:
       device-template-variable:
        template: "/vnms/sdwan/workflow/templates/template/SDWAN-PostStaging"
        variable-binding:
         attrs:
          - name: "{$v_TowardsInternet_IPv4__staticaddress}"
            value: "{{ wanIpForInternet }}"
            isAutogeneratable: "false"
          - name: "{$v_TowardsMPLS_IPv4__staticaddress}"
            value: "{{ wanIpForMpls }}"
            isAutogeneratable: "false"
          - name: "{$v_LAN_IPv4__staticaddress}"
            value: "{{ lanIp }}"
            isAutogeneratable: "false"
          - name: "{$v_TowardsInternet-Transport-VR_IPv4__vrHopAddress}"
            value: "{{ towardsInternetHopAddress }}"
            isAutogeneratable: "false"
          - name: "{$v_TowardsMPLS-Transport-VR_IPv4__vrHopAddress}"
            value: "{{ towardsMplsHopAddress }}"
            isAutogeneratable: "false"
          - name: "{$v_identification__IdName}"
            value: "{{ branchName }}"
            isAutogeneratable: "true"
       variableMetadata:
        - variable: "{$v_TowardsInternet_IPv4__staticaddress}"
          group: "Interfaces"
          overlay: "false"
          type: "IPV4_MASK"
        - variable: "{$v_TowardsMPLS_IPv4__staticaddress}"
          group: "Interfaces"
          overlay: "false"
          type: "IPV4_MASK"
        - variable: "{$v_tvi-0-5_-_Unit_0_Static_address__tunnelStaticAddress}"
          group: "Interfaces"
          overlay: "true"
          type: "IPV4_IPV6_MASK"
        - variable: "{$v_Chassis_Id__sitesChassisId}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_Customer1_Site_Name__sitesSiteName}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_longitude__Idlongitude}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_Customer1_Controller1_Local_auth_email_identifier__IKELIdentifier}"
          group: "IPSEC"
          overlay: "false"
        - variable: "{$v_LAN_IPv4__staticaddress}"
          group: "Interfaces"
          overlay: "false"
          type: "IPV4_MASK"
        - variable: "{$v_TowardsInternet-Transport-VR_IPv4__vrHopAddress}"
          group: "Virtual Routers"
          overlay: "false"
          type: "IPV4"
        - variable: "{$v_TowardsMPLS-Transport-VR_IPv4__vrHopAddress}"
          group: "Virtual Routers"
          overlay: "false"
          type: "IPV4"
        - variable: "{$v_Customer1-Control-VR_2_Local_address__vrRouterAddress}"
          group: "Virtual routers"
          overlay: "true"
          type: "IPV4"
        - variable: "{$v_Customer1_Controller1_Local_auth_email_key__IKELKey}"
          group: "IPSEC"
          overlay: "false"
        - variable: "{$v_location__IdLocation}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_tvi-0-4_-_Unit_0_Static_address__tunnelStaticAddress}"
          group: "Interfaces"
          overlay: "true"
          type: "IPV4_IPV6_MASK"
        - variable: "{$v_Customer1-Control-VR_2_Router_ID__vrRouteId}"
          group: "Virtual routers"
          overlay: "true"
        - variable: "{$v_Site_Id__siteSiteID}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_latitude__IdLatitude}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_identification__IdName}"
          group: "SDWAN"
          overlay: "false"
     stagingTemplateInfo:
      templateName: "{{ stagingTemplateName }}"
      templateData:
       device-template-variable:
        template: "{{ stagingTemplateName }}"
        variable-binding:
         attrs:
          - name: "{$v_WAN-Internet-Transport-VR_IPv4__vrHopAddress}"
            value: "{{ towardsInternetHopAddress }}"
            isAutogeneratable: "false"
          - name: "{$v_vni-0_0_-_Unit_WAN-Internet_IPv4__staticaddress}"
            value: "{{ wanIpForInternet }}"
            isAutogeneratable: "false"
       variableMetadata:
        - variable: "{$v_Accenture_Controller1_Local_auth_email_identifier__IKELIdentifier}"
          group: "IPSEC"
          overlay: "false"
        - variable: "{$v_Accenture_Site_Name__sitesSiteName}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_Chassis_Id__sitesChassisId}"
          group: "SDWAN"
          overlay: "false"
        - variable: "{$v_Accenture_Controller1_Local_auth_email_key__IKELKey}"
          group: "IPSEC"
          overlay: "false"
        - variable: "{$v_WAN-Internet-Transport-VR_IPv4__vrHopAddress}"
          group: "Virtual Routers"
          overlay: "false"
          type: "IPV4"
        - variable: "{$v_vni-0_0_-_Unit_WAN-Internet_IPv4__staticaddress}"
          group: "Interfaces"
          overlay: "false"
          type: "IPV4_MASK"

